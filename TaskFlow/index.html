<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow - Task Manager</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="bubble-bg">
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
    </div>
    <nav class="navbar">
        <h1>TaskFlow</h1>
        <div class="user-profile-container">
            <button class="profile-btn">
                <div class="profile-icon">U</div>
            </button>

            <div class="dropdown-menu">
                <div class="dropdown-item profile-menu-btn">
                    <span class="dropdown-item-icon">ğŸ‘¤</span>
                    <span>My Profile</span>
                </div>
                <div class="dropdown-item settings-menu-btn">
                    <span class="dropdown-item-icon">âš™ï¸</span>
                    <span>Settings</span>
                    <span style="margin-left: auto; font-size: 1.2rem;">â€º</span>
                </div>
                <div class="dropdown-item notifications-menu-btn">
                    <span class="dropdown-item-icon">ğŸ””</span>
                    <span>Notification</span>
                    <span style="margin-left: auto; font-size: 1.2rem;">â€º</span>
                </div>
                <div class="dropdown-item logout-menu-btn">
                    <span class="dropdown-item-icon">ğŸšª</span>
                    <span>Log Out</span>
                </div>
            </div>

            <!-- Settings Submenu -->
            <div class="dropdown-submenu settings-submenu">
                <div class="dropdown-item submenu-back back-to-main-btn">
                    <span style="font-size: 1.2rem;">â€¹</span>
                    <span>Back</span>
                </div>
                <div class="dropdown-item">
                    <span>Theme</span>
                    <div class="toggle-switch">
                        <span class="theme-label">Light</span>
                        <label class="switch">
                            <input type="checkbox" class="theme-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="dropdown-item language-selector">
                    <div class="language-display">
                        <span>Language</span>
                        <span class="language-label">English</span>
                    </div>
                </div>

                <!-- Language Options Dropdown -->
                <div class="language-options">
                    <div class="language-option active" data-lang="English" data-code="en">
                        <span class="language-flag">ğŸ‡¬ğŸ‡§</span>
                        <span>English</span>
                    </div>
                    <div class="language-option" data-lang="Spanish" data-code="es">
                        <span class="language-flag">ğŸ‡ªğŸ‡¸</span>
                        <span>EspaÃ±ol</span>
                    </div>
                    <div class="language-option" data-lang="French" data-code="fr">
                        <span class="language-flag">ğŸ‡«ğŸ‡·</span>
                        <span>FranÃ§ais</span>
                    </div>
                    <div class="language-option" data-lang="German" data-code="de">
                        <span class="language-flag">ğŸ‡©ğŸ‡ª</span>
                        <span>Deutsch</span>
                    </div>
                    <div class="language-option" data-lang="Italian" data-code="it">
                        <span class="language-flag">ğŸ‡®ğŸ‡¹</span>
                        <span>Italiano</span>
                    </div>
                    <div class="language-option" data-lang="Portuguese" data-code="pt">
                        <span class="language-flag">ğŸ‡µğŸ‡¹</span>
                        <span>PortuguÃªs</span>
                    </div>
                    <div class="language-option" data-lang="Russian" data-code="ru">
                        <span class="language-flag">ğŸ‡·ğŸ‡º</span>
                        <span>Ğ ÑƒÑÑĞºĞ¸Ğ¹</span>
                    </div>
                    <div class="language-option" data-lang="Dutch" data-code="nl">
                        <span class="language-flag">ğŸ‡³ğŸ‡±</span>
                        <span>Nederlands</span>
                    </div>
                    <div class="language-option" data-lang="Polish" data-code="pl">
                        <span class="language-flag">ğŸ‡µğŸ‡±</span>
                        <span>Polski</span>
                    </div>
                    <div class="language-option" data-lang="Swedish" data-code="sv">
                        <span class="language-flag">ğŸ‡¸ğŸ‡ª</span>
                        <span>Svenska</span>
                    </div>
                    <div class="language-option" data-lang="Chinese" data-code="zh">
                        <span class="language-flag">ğŸ‡¨ğŸ‡³</span>
                        <span>ä¸­æ–‡ (ç®€ä½“)</span>
                    </div>
                    <div class="language-option" data-lang="Japanese" data-code="ja">
                        <span class="language-flag">ğŸ‡¯ğŸ‡µ</span>
                        <span>æ—¥æœ¬èª</span>
                    </div>
                    <div class="language-option" data-lang="Korean" data-code="ko">
                        <span class="language-flag">ğŸ‡°ğŸ‡·</span>
                        <span>í•œêµ­ì–´</span>
                    </div>
                    <div class="language-option" data-lang="Hindi" data-code="hi">
                        <span class="language-flag">ğŸ‡®ğŸ‡³</span>
                        <span>à¤¹à¤¿à¤¨à¥à¤¦à¥€</span>
                    </div>
                    <div class="language-option" data-lang="Arabic" data-code="ar">
                        <span class="language-flag">ğŸ‡¸ğŸ‡¦</span>
                        <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                    </div>
                    <div class="language-option" data-lang="Turkish" data-code="tr">
                        <span class="language-flag">ğŸ‡¹ğŸ‡·</span>
                        <span>TÃ¼rkÃ§e</span>
                    </div>
                    <div class="language-option" data-lang="Vietnamese" data-code="vi">
                        <span class="language-flag">ğŸ‡»ğŸ‡³</span>
                        <span>Tiáº¿ng Viá»‡t</span>
                    </div>
                    <div class="language-option" data-lang="Thai" data-code="th">
                        <span class="language-flag">ğŸ‡¹ğŸ‡­</span>
                        <span>à¹„à¸—à¸¢</span>
                    </div>
                    <div class="language-option" data-lang="Greek" data-code="el">
                        <span class="language-flag">ğŸ‡¬ğŸ‡·</span>
                        <span>Î•Î»Î»Î·Î½Î¹ÎºÎ¬</span>
                    </div>
                    <div class="language-option" data-lang="Hebrew" data-code="he">
                        <span class="language-flag">ğŸ‡®ğŸ‡±</span>
                        <span>×¢×‘×¨×™×ª</span>
                    </div>
                </div>
            </div>

            <!-- Notifications Submenu -->
            <div class="dropdown-submenu notifications-submenu">
                <div class="dropdown-item submenu-back back-to-main-btn">
                    <span style="font-size: 1.2rem;">â€¹</span>
                    <span>Back</span>
                </div>
                <div class="dropdown-item">
                    <span>Notifications</span>
                    <div class="toggle-switch">
                        <span class="notifications-label">Allow</span>
                        <label class="switch">
                            <input type="checkbox" class="notifications-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Profile Page -->
    <div class="container">
        <div class="profile-page">
            <div class="profile-header">
                <button class="back-btn back-from-profile-btn">â†</button>
                <h2>My Profile</h2>
            </div>

            <form class="profile-form">
                <div class="form-group">
                    <label for="userName">Name</label>
                    <input type="text" id="userName" value="John Doe" required>
                </div>

                <div class="form-group">
                    <label for="userEmail">Email Address</label>
                    <input type="email" id="userEmail" value="john@example.com" required>
                </div>

                <div class="form-group">
                    <label for="userPhone">Mobile Number</label>
                    <input type="tel" id="userPhone" value="+1 (555) 123-4567">
                </div>

                <button type="submit" class="save-btn">Save Changes</button>
            </form>
        </div>

        <!-- Main Task Manager Content -->
        <div class="main-content">
            <div class="task-input-section">
                <div class="input-wrapper">
                    <input type="text" id="taskInput" placeholder="Add a new task..." autocomplete="off">
                    <button id="addTaskBtn">Add Task</button>
                </div>
            </div>

            <div class="filter-section">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="active">Active</button>
                <button class="filter-btn" data-filter="completed">Completed</button>
            </div>

            <div class="task-list" id="taskList">
                <!-- Tasks will be added here dynamically -->
            </div>
        </div>
    </div>

    <!-- Logout Modal -->
    <div class="modal-overlay logout-modal">
        <div class="modal">
            <h3>Confirm Logout</h3>
            <p>Are you sure you want to logout from TaskFlow?</p>
            <div class="modal-buttons">
                <button class="modal-btn confirm confirm-logout-btn">Yes, Logout</button>
                <button class="modal-btn cancel cancel-logout-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('TaskFlow loaded successfully!');

            // Task Manager Application
            let tasks = [
                { id: 1, title: 'Sample Task 1', completed: false, priority: 'medium' },
                { id: 2, title: 'Sample Task 2', completed: true, priority: 'low' }
            ];
            let currentFilter = 'all';
            let currentLanguage = 'English';

            // DOM Elements
            const profileBtn = document.querySelector('.profile-btn');
            const dropdownMenu = document.querySelector('.dropdown-menu');
            const profilePage = document.querySelector('.profile-page');
            const mainContent = document.querySelector('.main-content');
            const logoutModal = document.querySelector('.logout-modal');
            const profileForm = document.querySelector('.profile-form');

            // Dropdown menu items
            const profileMenuItem = document.querySelector('.profile-menu-btn');
            const settingsMenuItem = document.querySelector('.settings-menu-btn');
            const notificationsMenuItem = document.querySelector('.notifications-menu-btn');
            const logoutMenuItem = document.querySelector('.logout-menu-btn');

            // Submenus
            const settingsSubmenu = document.querySelector('.settings-submenu');
            const notificationsSubmenu = document.querySelector('.notifications-submenu');

            // Back buttons
            const backToMainBtns = document.querySelectorAll('.back-to-main-btn');
            const backFromProfileBtn = document.querySelector('.back-from-profile-btn');

            // Modal buttons
            const confirmLogoutBtn = document.querySelector('.confirm-logout-btn');
            const cancelLogoutBtn = document.querySelector('.cancel-logout-btn');

            // Toggle elements
            const themeToggle = document.querySelector('.theme-toggle');
            const themeLabel = document.querySelector('.theme-label');
            const notificationsToggle = document.querySelector('.notifications-toggle');
            const notificationsLabel = document.querySelector('.notifications-label');

            // Language elements
            const languageDisplay = document.querySelector('.language-display');
            const languageLabel = document.querySelector('.language-label');
            const languageOptions = document.querySelector('.language-options');

            // Task-related elements
            const taskInput = document.getElementById('taskInput');
            const addTaskBtn = document.getElementById('addTaskBtn');
            const taskList = document.getElementById('taskList');
            const filterBtns = document.querySelectorAll('.filter-btn');

            // Initialize
            renderTasks();
            loadUserPreferences();

            // Expose task functions to global for inline handlers
            window.deleteTask = deleteTask;
            window.toggleTask = toggleTask;
            window.editTask = editTask;

            // 1. Profile dropdown toggle
            profileBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                dropdownMenu.classList.toggle('show');
                settingsSubmenu.classList.remove('show');
                notificationsSubmenu.classList.remove('show');
                languageOptions.classList.remove('show');
            });

            // 2. Close dropdown when clicking outside
            document.addEventListener('click', function (e) {
                if (!e.target.closest('.user-profile-container')) {
                    dropdownMenu.classList.remove('show');
                    settingsSubmenu.classList.remove('show');
                    notificationsSubmenu.classList.remove('show');
                    languageOptions.classList.remove('show');
                }
            });

            // 3. Profile menu item
            profileMenuItem.addEventListener('click', function () {
                dropdownMenu.classList.remove('show');
                mainContent.style.display = 'none';
                profilePage.style.display = 'block';
            });

            // 4. Settings menu item
            settingsMenuItem.addEventListener('click', function (e) {
                e.stopPropagation();
                dropdownMenu.classList.remove('show');
                settingsSubmenu.classList.add('show');
            });

            // 5. Notifications menu item
            notificationsMenuItem.addEventListener('click', function (e) {
                e.stopPropagation();
                dropdownMenu.classList.remove('show');
                notificationsSubmenu.classList.add('show');
            });

            // 6. Logout menu item
            logoutMenuItem.addEventListener('click', function () {
                dropdownMenu.classList.remove('show');
                logoutModal.classList.add('show');
            });

            // 7. Back buttons from submenus
            backToMainBtns.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.stopPropagation();
                    settingsSubmenu.classList.remove('show');
                    notificationsSubmenu.classList.remove('show');
                    languageOptions.classList.remove('show');
                    dropdownMenu.classList.add('show');
                });
            });

            // 8. Back from profile page
            backFromProfileBtn.addEventListener('click', function () {
                profilePage.style.display = 'none';
                mainContent.style.display = 'block';
            });

            // 9. Logout modal buttons
            confirmLogoutBtn.addEventListener('click', function () {
                logoutModal.classList.remove('show');
                alert('Logged out successfully!');
            });

            cancelLogoutBtn.addEventListener('click', function () {
                logoutModal.classList.remove('show');
            });

            // 10. Theme toggle
            themeToggle.addEventListener('change', function () {
                if (this.checked) {
                    document.body.classList.add('dark-mode');
                    themeLabel.textContent = 'Dark';
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.body.classList.remove('dark-mode');
                    themeLabel.textContent = 'Light';
                    localStorage.setItem('theme', 'light');
                }
            });

            // 11. Notifications toggle
            notificationsToggle.addEventListener('change', function () {
                if (this.checked) {
                    notificationsLabel.textContent = 'Allow';
                    localStorage.setItem('notifications', 'true');
                } else {
                    notificationsLabel.textContent = "Don't Allow";
                    localStorage.setItem('notifications', 'false');
                }
            });

            // 12. Language selector
            languageDisplay.addEventListener('click', function (e) {
                e.stopPropagation();
                languageOptions.classList.toggle('show');
            });

            // 13. Language options selection
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function (e) {
                    e.stopPropagation();
                    const lang = this.getAttribute('data-lang');

                    document.querySelectorAll('.language-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');

                    languageLabel.textContent = lang;
                    localStorage.setItem('language', lang);
                    languageOptions.classList.remove('show');
                    showNotification(`Language changed to ${lang}`);
                    currentLanguage = lang;
                });
            });

            // 14. Profile form
            profileForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const userName = document.getElementById('userName').value;
                const userEmail = document.getElementById('userEmail').value;
                const userPhone = document.getElementById('userPhone').value;

                const profileIcon = document.querySelector('.profile-icon');
                profileIcon.textContent = userName.charAt(0).toUpperCase();

                localStorage.setItem('userName', userName);
                localStorage.setItem('userEmail', userEmail);
                localStorage.setItem('userPhone', userPhone);

                showNotification('Profile updated successfully!');
                profilePage.style.display = 'none';
                mainContent.style.display = 'block';
            });

            // 15. Task-related event listeners
            addTaskBtn.addEventListener('click', addTask);
            taskInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addTask();
            });

            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentFilter = btn.dataset.filter;
                    renderTasks();
                });
            });

            // Load saved preferences
            function loadUserPreferences() {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeToggle.checked = true;
                    themeLabel.textContent = 'Dark';
                }

                const savedNotifications = localStorage.getItem('notifications');
                if (savedNotifications === 'false') {
                    notificationsToggle.checked = false;
                    notificationsLabel.textContent = "Don't Allow";
                }

                const savedLanguage = localStorage.getItem('language');
                if (savedLanguage) {
                    currentLanguage = savedLanguage;
                    languageLabel.textContent = currentLanguage;

                    document.querySelectorAll('.language-option').forEach(option => {
                        option.classList.remove('active');
                        if (option.getAttribute('data-lang') === currentLanguage) {
                            option.classList.add('active');
                        }
                    });
                }

                const savedName = localStorage.getItem('userName');
                const savedEmail = localStorage.getItem('userEmail');
                const savedPhone = localStorage.getItem('userPhone');

                if (savedName) {
                    document.getElementById('userName').value = savedName;
                    document.querySelector('.profile-icon').textContent = savedName.charAt(0).toUpperCase();
                }
                if (savedEmail) document.getElementById('userEmail').value = savedEmail;
                if (savedPhone) document.getElementById('userPhone').value = savedPhone;
            }

            // Notification function
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background-color: #3b82f6;
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    z-index: 3000;
                    animation: slideInRight 0.3s ease;
                    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    max-width: 300px;
                `;

                const icon = document.createElement('span');
                icon.textContent = 'â„¹ï¸';
                notification.appendChild(icon);

                const messageSpan = document.createElement('span');
                messageSpan.textContent = message;
                notification.appendChild(messageSpan);

                const style = document.createElement('style');
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);

                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
            function getFilteredTasks() {
                if (currentFilter === 'active') {
                    return tasks.filter(task => !task.completed);
                } else if (currentFilter === 'completed') {
                    return tasks.filter(task => task.completed);
                }
                return tasks;
            }

            function renderTasks() {
                const filteredTasks = getFilteredTasks();

                if (filteredTasks.length === 0) {
                    taskList.innerHTML = '<div class="empty-state">No tasks to display</div>';
                    return;
                }

                taskList.innerHTML = filteredTasks.map(task => `
                    <div class="task-item">
                        <div class="task-content">
                            <input 
                                type="checkbox" 
                                class="task-checkbox" 
                                ${task.completed ? 'checked' : ''}
                                onchange="toggleTask(${task.id})"
                            >
                            <span class="task-title ${task.completed ? 'completed' : ''}">
                                ${task.title}
                            </span>
                        </div>
                        <div class="task-actions">
                            <button class="edit-btn" onclick="editTask(${task.id})">âœï¸</button>
                            <button class="delete-btn" onclick="deleteTask(${task.id})">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                `).join('');
            }



            // Task Functions
            function addTask() {
                const taskTitle = taskInput.value.trim();
                if (taskTitle === '') return;

                const newTask = {
                    id: Date.now(),
                    title: taskTitle,
                    completed: false,
                    priority: 'medium'
                };

                tasks.push(newTask);
                taskInput.value = '';
                renderTasks();
                showNotification('Task added successfully!');
            }

            function deleteTask(id) {
                const taskElement = document.querySelector(
                    `.task-item button[onclick="deleteTask(${id})"]`
                )?.closest('.task-item');

                if (!taskElement) return;

                taskElement.classList.add('removing');

                setTimeout(() => {
                    tasks = tasks.filter(task => task.id !== id);
                    renderTasks();
                    showNotification('Task deleted!');
                }, 300);
            }

            function toggleTask(id) {
                const task = tasks.find(t => t.id === id);
                if (!task) return;

                task.completed = !task.completed;
                renderTasks();

                if (task.completed) {
                    const checkbox = document.querySelector(
                        `.task-checkbox[onchange="toggleTask(${id})"]`
                    );
                    if (checkbox) {
                        const rect = checkbox.getBoundingClientRect();
                        launchConfetti(rect.left + rect.width / 2, rect.top);
                    }
                }
            }

            function editTask(id) {
                const task = tasks.find(t => t.id === id);
                if (!task) return;

                const newTitle = prompt("Edit task:", task.title);

                if (newTitle !== null && newTitle.trim() !== "") {
                    task.title = newTitle.trim();
                    renderTasks();
                    showNotification("Task updated successfully!");
                }
            }
            if (isDueToday(task.dueDate)) {
                taskElement.classList.add('urgent');
            }

            function clearAllTasks() {
                const items = document.querySelectorAll('.task-item');

                items.forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add('removing');
                    }, index * 80);
                });

                setTimeout(() => {
                    tasks = [];
                    renderTasks();
                }, items.length * 80 + 300);
            }
            taskElement.classList.add('editing');


            // ISSUE 10: Implement drag and drop to reorder tasks

            // ISSUE 11: Add due date picker for each task

            // ISSUE 12: Create a settings page with user preferences

            // ISSUE 13: Add search functionality to filter tasks

            // ISSUE 15: Make the app responsive for mobile devices 

        });
        function launchConfetti(x, y) {
            const colors = ["#22c55e", "#3b82f6", "#facc15", "#ec4899", "#a855f7"];

            for (let i = 0; i < 18; i++) {
                const confetti = document.createElement("div");
                confetti.className = "confetti";

                confetti.style.left = x + "px";
                confetti.style.top = y + "px";

                confetti.style.backgroundColor =
                    colors[Math.floor(Math.random() * colors.length)];

                confetti.style.setProperty("--x", `${(Math.random() - 0.5) * 160}px`);
                confetti.style.setProperty("--y", `${Math.random() * -120}px`);

                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 700);
            }
        }

        document.addEventListener("change", (e) => {
            if (e.target.classList.contains("task-checkbox") && e.target.checked) {
                const rect = e.target.getBoundingClientRect();

                launchConfetti(
                    rect.left + rect.width / 2,
                    rect.top
                );
            }
        });
        document.querySelectorAll('.task-item').forEach(card => {
            card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;

                card.style.transform = `
            perspective(900px)
            rotateX(${-y / 18}deg)
            rotateY(${x / 18}deg)
            translateY(-6px)
            scale(1.03)
        `;
            });

            card.addEventListener('mouseleave', () => {
                card.style.transform = '';
            });
            const strength = 12; // tilt intensity

            card.addEventListener("mousemove", e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const rotateX = ((y - centerY) / centerY) * -strength;
                const rotateY = ((x - centerX) / centerX) * strength;

                card.style.transform = `
            perspective(900px)
            rotateX(${rotateX}deg)
            rotateY(${rotateY}deg)
            translateY(-6px)
            scale(1.02)
        `;

                card.style.setProperty("--mx", `${(x / rect.width) * 100}%`);
                card.style.setProperty("--my", `${(y / rect.height) * 100}%`);
            });

            card.addEventListener("mouseleave", () => {
                card.style.transform = `
            perspective(900px)
            rotateX(0deg)
            rotateY(0deg)
            translateY(0)
            scale(1)
        `;
            });
        })
    </script>

</body>

</html>